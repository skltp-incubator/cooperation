swagger: '2.0'
info:
  title: Etablerad samverkan i vården
  description: 'Information om tjänster, producenter och konsumenter baserad på tjänsteaddresseringskatalogen i både Ineras nationella tjänsteplattform och regionala tjänsteplattformar. Eventuella framtida ändringar syns inte i api:et, enbart hur det ser ut just nu. Konfiguration i en tjänsteplattform kan ibland ske på en viss nivå i hsa-trädet, och avser alla noder därunder. Detta spegla rakt av i api:et, hsa-trädet evalueras inte här. De tekniska id-begrepper på alla objekt genereras om en gång per dygn, de garanteras alltså inte ha samma värde två dagar i rad.
    Det kan behöva anges en api-nyckel för att accessa api:et.' 
  version: 1.1.0
host: localhost:8080
schemes:
  - http
basePath: /api/v1
produces:
  - application/json
  - application/xml
paths:
  /connectionPoints:
    get:
      summary: Connection Point - TP instans
      description: |
        Alla instanser av tjänsteplattformar som har exporterat information till detta api. Idag sker exporten en gång per dygn. En instans identifieras versamhetsmässigt av kombinationen mellan en plattform och vilken staging-miljö som avses.
      parameters:
        - name: platform
          in: query
          description: Filtrera på plattform, tex NTJP
          required: false
          type: string
        - name: environment
          in: query
          description: Filtrerar på miljö tex PRODUCTION
          required: false
          type: string
          format: double
        - name: serviceConsumerId
          in: query
          description: Filtrerar bara ConnectionPoints som innehåller någon samverkan med en specifik tjänstekonsument. Ange den tekniska nyckeln för serviceConsumer tex 538.
          required: false
          type: number
          format: long
        - name: logicalAddressId
          in: query
          description: Filtrerar bara ConnectionPoints som innehåller någon samverkan med en specifik logisk adress. Ange den tekniska nyckeln för LogicalAddress tex 42.
          required: false
          type: number
          format: long
        - name: serviceContractId
          in: query
          description: Filtrerar bara ConnectionPoints som innehåller någon samverkan med en specifik tjänstekontrakt. Ange den tekniska nyckeln för ServiceContract tex 123.
          required: false
          type: number
          format: long
        - name: serviceProducerId
          in: query
          description: 'Filtrerar bara ConnectionPoints som innehåller någon samverkan med en specifik tjänsteproducent. Sökningen utförs genom att titta på tjänstproducenter som publiserar en tjänst på en viss logisk adress samtidigt som någon tjänstekonsument är konfigurerad att anropa samma logiska adress. 
          Ange den tekniska nyckeln för ServiceProducer tex 538.'
          required: false
          type: number
          format: long
      tags:
        - ConnectionPoint
      responses:
        '200':
          description: En lista av ConnectionPoints
          schema:
            type: array
            items:
              $ref: '#/definitions/ConnectionPoint'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /connectionPoints/{id}:
    get:
      summary: Connection Point - TP instans
      description: |
        En specifik instans av tjänsteplattformen.
      parameters:
        - name: id
          in: path
          description: tekniskt nyckel 
          required: true
          type: number
      tags:
        - ConnectionPoint
      responses:
        '200':
          description: En ConnectionPoint
          schema:
              $ref: '#/definitions/ConnectionPoint'
        '404':
          description: ConnectionPoint not found
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /serviceConsumers:
    get:
      summary: Service Consumer - tjänstekonsument
      description: |
        Alla tjänstekonsumenter. En konsument identifieras versamhetsmässigt av hsa-id. Olika förekomster av konsumenter som kommer från olika instanser av tjänsteplattformar slås ihop till ett objekt. Däremot är det inte garanterat att ett konsumerande system har samma hsa-id i olika staging-miljöer, det kan bli två olika objekt i detta api även om man logiskt sett kan tycka att de är samma system. 
      parameters:
        - name: connectionPointId
          in: query
          description: Filtrerar bara tjänstekonsumenter som har någon samverkan konfigurerad i den aktulla instansen av tjänsteplattformen. Ange den tekniska nyckeln för connectionPoint tex 376.
          required: false
          type: number
          format: long
        - name: logicalAddressId
          in: query
          description: Filtrerar bara tjänstekonsumenter som har någon samverkan med en specifik logisk adress. Ange den tekniska nyckeln för LogicalAddress tex 42.
          required: false
          type: number
          format: long
        - name: serviceContractId
          in: query
          description: Filtrerar bara tjänstekonsumenter som har någon samverkan med ett specifik tjänstekontrakt. Ange den tekniska nyckeln för ServiceContract tex 123.
          required: false
          type: number
          format: long
        - name: serviceProducerId
          in: query
          description: 'Filtrerar bara tjänstekonsumenter som har någon samverkan med en specifik tjänsteproducent. Sökningen utförs genom att titta på tjänstproducenter som publiserar en tjänst på en viss logisk adress samtidigt som någon tjänstekonsument är konfigurerad att anropa samma logiska adress. 
          Ange den tekniska nyckeln för ServiceProducer tex 538.'
          required: false
          type: number
          format: long
      tags:
        - ServiceConsumer
      responses:
        '200':
          description: En lista av ServiceConsumer
          schema:
            type: array
            items:
              $ref: '#/definitions/ServiceConsumer'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /serviceConsumers/{id}:
    get:
      summary: Service Consumer - tjänstekonsument
      description: |
        En specifik tjänstekonsument.
      parameters:
        - name: id
          in: path
          description: teknisk nyckel
          required: true
          type: number
      tags:
        - ServiceConsumer
      responses:
        '200':
          description: En tjänstekonsument
          schema:
              $ref: '#/definitions/ServiceConsumer'
        '404':
          description: ServiceConsumer not found
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /cooperations:
    get:
      summary: Cooperation - samverkan
      description: |
        Alla samverkan. En tjänstekonsument är konfigurerad att samverka via en logisk adress avseende ett tjänstekontrakt. Objektet i sig innehåller inga attribut men genom att använda include-parametern hängs det på information från 1-4 relaterade objekt som beskriver samverkan. OBS prova inte denna resurs på denna sida utan att ange minst en filtrerings-parameter. Det är ganska stor träffbild om man får alla förekomster tillbaka och de skall parsas i dokumentverktyget, tar lång tid.  
      parameters:
        - name: connectionPointId
          in: query
          description: Filtrerar bara samverkan som är konfigurerad i den aktulla instansen av tjänsteplattformen. Ange den tekniska nyckeln för connectionPoint tex 376.
          required: false
          type: number
          format: long
        - name: logicalAddressId
          in: query
          description: Filtrerar bara samverkan som avser en specifik logisk adress. Ange den tekniska nyckeln för LogicalAddress tex 42.
          required: false
          type: number
          format: long
        - name: serviceContractId
          in: query
          description: Filtrerar bara samverkan som avser ett specifik tjänstekontrakt. Ange den tekniska nyckeln för ServiceContract tex 123.
          required: false
          type: number
          format: long
        - name: serviceConsumerId
          in: query
          description: 'Filtrerar bara samverkan avseende en specifik tjänstekonsument. 
          Ange den tekniska nyckeln för ServiceConsumerId tex 538.'
          required: false
          type: number
          format: long
        - name: include
          in: query
          description: 'Styr hur mycket information som skall skickas tillbaka i svaret. 
          Ange en eller flera av följande objekt kommaseparerade connectionPoint,logicalAddress,serviceContract,serviceConsumer'
          required: false
          type: string
          default: connectionPoint,logicalAddress,serviceContract,serviceConsumer
      tags:
        - Cooperation
      responses:
        '200':
          description: En lista av Cooperation
          schema:
            type: array
            items:
              $ref: '#/definitions/Cooperation'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /cooperations/{id}:
    get:
      summary: Cooperation - samverkan
      description: |
        En specifik samverkan. Alla 4 relaterade objekt är alltdi inkluderade.
      parameters:
        - name: id
          in: path
          description: teknisk nyckel
          required: true
          type: number
      tags:
        - Cooperation
      responses:
        '200':
          description: En samverkan
          schema:
              $ref: '#/definitions/Cooperation'
        '404':
          description: Cooperation not found
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /serviceContracts:
    get:
      summary: ServiceContract - tjänstekontrakt
      description: |
        Alla tjänstekontrakt. Identifieras versamhetsmässigt av namespace. Olika förekomster av tjänstekontrakt som kommer från olika instanser av tjänsteplattformar slås ihop till ett objekt  
      parameters:
        - name: namespace
          in: query
          description: Sök tjänstekontrakt som har ett visst namespace. Resultatlistan kommer bara att innehålla ett tjänstekontrakt
          required: false
          type: string
        - name: connectionPointId
          in: query
          description: Filtrerar tjänstekontrakt som används i den aktulla instansen av tjänsteplattformen. Ange den tekniska nyckeln för connectionPoint tex 376.
          required: false
          type: number
          format: long
        - name: logicalAddressId
          in: query
          description: Filtrerar bara tjänstekontrakt som publiseras via en specifik logisk adress. Ange den tekniska nyckeln för LogicalAddress tex 42.
          required: false
          type: number
          format: long
        - name: serviceProducerId
          in: query
          description: Filtrerar bara tjänstekontrakt som publiseras av en specifik tjänsteproducent. Ange den tekniska nyckeln för ServiceProducer tex 123.
          required: false
          type: number
          format: long
        - name: serviceConsumerId
          in: query
          description: 'Filtrerar bara tjänstekontrakt som anropas av en viss tjänstekonsument. 
          Ange den tekniska nyckeln för ServiceConsumer tex 538.'
          required: false
          type: number
          format: long
        - name: serviceDomainId
          in: query
          description: 'Filtrerar bara tjänstekontrakt som ingår i en specifik tjänstedomän. 
          Ange den tekniska nyckeln för ServiceDomain tex 538.'
          required: false
          type: number
          format: long
      tags:
        - ServiceContract
      responses:
        '200':
          description: En lista av ServiceContract
          schema:
            type: array
            items:
              $ref: '#/definitions/ServiceContract'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /serviceContracts/{id}:
    get:
      summary: ServiceContract - tjänstekontrakt
      description: |
        Ett specifikt tjänstekontrakt.
      parameters:
        - name: id
          in: path
          description: teknisk nyckel
          required: true
          type: number
      tags:
        - ServiceContract
      responses:
        '200':
          description: Ett tjänstekontrakt
          schema:
              $ref: '#/definitions/ServiceContract'
        '404':
          description: ServiceContract not found
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /logicalAddresss:
    get:
      summary: LogicalAddress - logisk adress
      description: |
        Alla logiska adresser. Identifieras versamhetsmässigt av attributet logisk adress. Olika förekomster av logiska adresser som kommer från olika instanser av tjänsteplattformar slås ihop till ett objekt  
      parameters:
        - name: logicalAdress
          in: query
          description: Sök logiska adresser som har ett visst logisk adress. Resultatlistan kommer bara att innehålla ett objekt
          required: false
          type: string
        - name: connectionPointId
          in: query
          description: Filtrerar logiska adresser som används i den aktulla instansen av tjänsteplattformen. Ange den tekniska nyckeln för connectionPoint tex 376.
          required: false
          type: number
          format: long
        - name: serviceProducerId
          in: query
          description: Filtrerar bara logiska adresser som publiseras av en specifik tjänsteproducent. Ange den tekniska nyckeln för ServiceProducer tex 123.
          required: false
          type: number
          format: long
        - name: serviceContractId
          in: query
          description: Filtrerar bara logiska adresser som används vid publiseras av ett specifik tjänstekontrakt. Ange den tekniska nyckeln för ServiceContract tex 123.
          required: false
          type: number
          format: long
        - name: serviceConsumerId
          in: query
          description: 'Filtrerar bara logiska adresser som anropas av en viss tjänstekonsument.
          Ange den tekniska nyckeln för ServiceConsumer tex 538.'
          required: false
          type: number
          format: long
      tags:
        - LogicalAddress
      responses:
        '200':
          description: En lista av LogicalAddress
          schema:
            type: array
            items:
              $ref: '#/definitions/LogicalAddress'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /logicalAddresss/{id}:
    get:
      summary: LogicalAddress - logisk adress
      description: |
        En specifikt logisk adress.
      parameters:
        - name: id
          in: path
          description: teknisk nyckel
          required: true
          type: number
      tags:
        - LogicalAddress
      responses:
        '200':
          description: Ett logisk adress
          schema:
              $ref: '#/definitions/LogicalAddress'
        '404':
          description: LogicalAddress not found
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /serviceDomains:
    get:
      summary: ServiceDomain - tjänstedomän
      description: |
        Alla tjänstedomäner. Identifieras verksamhetsmässigt av namespace. Härleds från tjänstekontraktens namespace genom att ta bort avslutningen. Olika förekomster av tjänstedomäner som kommer från olika instanser av tjänsteplattformar slås ihop till ett objekt.  
      parameters:
        - name: namespace
          in: query
          description: Sök tjänstedomäner som har ett visst namespace. Resultatlistan kommer bara att innehålla en tjänstedomän
          required: false
          type: string
      tags:
        - ServiceDomain
      responses:
        '200':
          description: En lista av ServiceDomain
          schema:
            type: array
            items:
              $ref: '#/definitions/ServiceDomain'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /serviceDomains/{id}:
    get:
      summary: ServiceDomain - tjänstedomän
      description: |
        En specifikt tjänstedomän.
      parameters:
        - name: id
          in: path
          description: teknisk nyckel
          required: true
          type: number
      tags:
        - ServiceDomain
      responses:
        '200':
          description: En tjänstedomän
          schema:
              $ref: '#/definitions/ServiceDomain'
        '404':
          description: ServiceDomain not found
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /serviceProducers:
    get:
      summary: Service Producer - tjänsteproducent
      description: |
        Alla tjänsteproducenter. En producent identifieras verksamhetsmässigt av hsa-id. Olika förekomster av producenter som kommer från olika instanser av tjänsteplattformar slås ihop till ett objekt. Däremot är det inte garanterat att ett producerande system har samma hsa-id i olika staging-miljöer, det kan bli två olika objekt i detta api även om man logiskt sett kan tycka att de är samma system. 
      parameters:
        - name: hsaId
          in: query
          description: Sök bara tjänsteproducenter som har angivet hsaId. Bör bara ge en träff i listan.
          required: false
          type: string
        - name: connectionPointId
          in: query
          description: Filtrerar bara tjänsteproducenter som publiserar någon tjänst någon i den aktulla instansen av tjänsteplattformen. Ange den tekniska nyckeln för connectionPoint tex 376.
          required: false
          type: number
          format: long
        - name: logicalAddressId
          in: query
          description: Filtrerar bara tjänsteproducenter som publiserar någon tjänst med en specifik logisk adress. Ange den tekniska nyckeln för LogicalAddress tex 42.
          required: false
          type: number
          format: long
        - name: serviceContractId
          in: query
          description: Filtrerar bara tjänsteproducenter som publiserar någon tjänst med ett specifik tjänstekontrakt. Ange den tekniska nyckeln för ServiceContract tex 123.
          required: false
          type: number
          format: long
        - name: serviceConsumerId
          in: query
          description: 'Filtrerar bara tjänsteproducenter som har någon samverkan med en specifik tjänstekonsument. Sökningen utförs genom att titta på tjänstproducenter som publiserar en tjänst på en viss logisk adress samtidigt som någon tjänstekonsument är konfigurerad att anropa samma logiska adress. 
          Ange den tekniska nyckeln för ServiceConsumer tex 538.'
          required: false
          type: number
          format: long
      tags:
        - ServiceProducer
      responses:
        '200':
          description: En lista av ServiceProducer
          schema:
            type: array
            items:
              $ref: '#/definitions/ServiceProducer'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /serviceProducers/{id}:
    get:
      summary: Service Producer - tjänsteproducent
      description: |
        En specifik tjänsteproducent.
      parameters:
        - name: id
          in: path
          description: teknisk nyckel
          required: true
          type: number
      tags:
        - ServiceProducer
      responses:
        '200':
          description: En tjänsteproducent
          schema:
              $ref: '#/definitions/ServiceProducer'
        '404':
          description: ServiceProducer not found
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /serviceProductions:
    get:
      summary: ServiceProduction - tjänsteproduktion
      description: |
        Alla tjänsteproduktioner. En tjänsteproducent är konfigurerad att publicera en tjänst via en logisk adress avseende ett tjänstekontrakt. Genom att använda include-parametern hängs det på information från 1-4 relaterade objekt som beskriver tjänsteproduktionen. OBS prova inte denna resurs på denna sida utan att ange minst en filtrerings-parameter. Det är ganska stor träffbild om man får alla förekomster tillbaka och de skall parsas i dokumentverktyget, tar lång tid.  
      parameters:
        - name: physicalAddress
          in: query
          description: Sök bara tjänsteproduktioner som har angiven fysisk adress.
          required: false
          type: string
        - name: rivtaProfile
          in: query
          description: Sök bara tjänsteproduktioner som har angivet rivTaProfil.
          required: false
          type: string
        - name: connectionPointId
          in: query
          description: Filtrerar bara tjänsteproduktioner som är konfigurerade i den aktulla instansen av tjänsteplattformen. Ange den tekniska nyckeln för connectionPoint tex 376.
          required: false
          type: number
          format: long
        - name: logicalAddressId
          in: query
          description: Filtrerar bara tjänsteproduktioner som avser en specifik logisk adress. Ange den tekniska nyckeln för LogicalAddress tex 42.
          required: false
          type: number
          format: long
        - name: serviceContractId
          in: query
          description: Filtrerar bara tjänsteproduktioner som avser ett specifik tjänstekontrakt. Ange den tekniska nyckeln för ServiceContract tex 123.
          required: false
          type: number
          format: long
        - name: serviceProducerId
          in: query
          description: 'Filtrerar bara tjänsteproduktioner avseende en specifik tjänsteproducent. 
          Ange den tekniska nyckeln för ServiceProducer tex 538.'
          required: false
          type: number
          format: long
        - name: include
          in: query
          description: 'Styr hur mycket information som skall skickas tillbaka i svaret. 
          Ange en eller flera av följande objekt kommaseparerade connectionPoint,logicalAddress,serviceContract,serviceProducer'
          required: false
          type: string
          default: connectionPoint,logicalAddress,serviceContract,serviceProducer
      tags:
        - ServiceProduction
      responses:
        '200':
          description: En lista av ServiceProduction
          schema:
            type: array
            items:
              $ref: '#/definitions/'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /serviceProductions/{id}:
    get:
      summary: ServiceProduction - tjänsteproduktion
      description: |
        En specifik tjänsteproduktion. Alla 4 relaterade objekt är alltdi inkluderade.
      parameters:
        - name: id
          in: path
          description: teknisk nyckel
          required: true
          type: number
      tags:
        - ServiceProduction
      responses:
        '200':
          description: En tjänsteproduktion
          schema:
              $ref: '#/definitions/ServiceProduction'
        '404':
          description: ServiceProduction not found
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'

definitions:
  ConnectionPoint:
    type: object
    properties:
      id:
        type: number
        description: 'Unik teknisk nyckel'
      platform:
        type: string
        description: Plattform tex NTJP.
      environment:
        type: string
        description: Miljö tex PRODUCTION.
      snapshotTime:
        type: string
        description: Den tidpunkt som informationen lästes av från tjänsteplattformen.
  ServiceConsumer:
    type: object
    properties:
      id:
        type: number
        description: 'Unik teknisk nyckel'
      hsaId:
        type: string
        description: hsa-id.
      description:
        type: string
        description: Beskrivning.
  Cooperation:
    type: object
    properties:
      id:
        type: number
        description: 'Unik teknisk nyckel'
      serviceConsumer:
        $ref: '#/definitions/ServiceConsumer'
        description: 'en inkluderad tjänstekonsument'
      logicalAdress:
        $ref: '#/definitions/LogicalAddress'
        description: 'en inkluderad logisk adress'
      serviceContract:
        $ref: '#/definitions/ServiceContract'
        description: 'en inkluderat tjänstekontrakt'
      connectionPoint:
        $ref: '#/definitions/ConnectionPoint'
        description: 'en inkluderad tp-instans'
  LogicalAddress:
    type: object
    properties:
      id:
        type: number
        description: 'Unik teknisk nyckel'
      logicalAddress:
        type: string
        description: logisk adress.
      description:
        type: string
        description: Beskrivning.
  ServiceContract:
    type: object
    properties:
      id:
        type: number
        description: 'Unik teknisk nyckel'
      name:
        type: string
        description: Namn.
      namespace:
        type: string
        description: Namnrymd.
      major:
        type: string
        description: Major-version.
      minor:
        type: string
        description: Minor-version.
  ServiceDomain:
    type: object
    properties:
      id:
        type: number
        description: 'Unik teknisk nyckel'
      name:
        type: string
        description: Namn.
      namespace:
        type: string
        description: Namnrymd.
  ServiceProducer:
    type: object
    properties:
      id:
        type: number
        description: 'Unik teknisk nyckel'
      hsaId:
        type: string
        description: hsa-id.
      description:
        type: string
        description: Beskrivning.
  ServiceProduction:
    type: object
    properties:
      id:
        type: number
        description: 'Unik teknisk nyckel'
      physicalAddress:
        type: string
        description: fysisk adress för tjänsten.
      rivtaProfile:
        type: string
        description: Den profil som tjänsten stöder.
      serviceProducer:
        $ref: '#/definitions/ServiceProducer'
        description: 'en inkluderad tjänsteproducent'
      logicalAdress:
        $ref: '#/definitions/LogicalAddress'
        description: 'en inkluderad logisk adress'
      serviceContract:
        $ref: '#/definitions/ServiceContract'
        description: 'en inkluderat tjänstekontrakt'
      connectionPoint:
        $ref: '#/definitions/ConnectionPoint'
        description: 'en inkluderad tp-instans'

  Error:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
      fields:
        type: string
